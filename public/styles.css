/* 引入小米字体 MiSans-Bold (本地字体文件) */
@font-face {
  font-family: 'MiSans';
  src: url('font/MiSans-Bold.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* =========================================
   1. AESTHETIC MODE (DEFAULT) VARIABLES
   ========================================= */
:root {
  color-scheme: light;

  /* Palette - Soft, dreamy, warm */
  --bg: #f2f4f6;
  --text: #1d1d1f;
  --muted: #86868b;

  /* Glassmorphism Variables */
  --card: rgba(255, 255, 255, 0.7);
  --card-soft: rgba(255, 255, 255, 0.5);
  --card-muted: rgba(255, 255, 255, 0.4);
  --border: rgba(255, 255, 255, 0.6);
  --border-strong: rgba(255, 255, 255, 0.8);

  /* Shadows & Effects */
  --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.5) inset;
  --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(255, 255, 255, 0.5) inset;
  --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.05);
  --shadow-strong: 0 12px 30px rgba(0, 0, 0, 0.12);
  --panel-shadow: -10px 0 40px rgba(0, 0, 0, 0.1);

  --overlay: rgba(0, 0, 0, 0.2);
  --focus-ring: rgba(59, 130, 246, 0.5);

  --input-bg: rgba(255, 255, 255, 0.6);
  --segment-bg: rgba(0, 0, 0, 0.05);
  --button-hover: rgba(255, 255, 255, 0.8);
  --button-active: rgba(255, 255, 255, 0.9);
  --icon-bg: rgba(255, 255, 255, 0.8);

  --bubble-bg: rgba(255, 255, 255, 0.85);
  --bubble-border: rgba(255, 255, 255, 0.8);
  --bubble-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

  /* Aesthetic Only */
  --blur-strength: 20px;
}

/* Dark Mode Aesthetic */
.dark {
  color-scheme: dark;
  --bg: #050505;
  --text: #f5f5f7;
  --muted: #a1a1a6;

  --card: rgba(30, 30, 35, 0.6);
  --card-soft: rgba(40, 40, 45, 0.5);
  --card-muted: rgba(40, 40, 45, 0.4);
  --border: rgba(255, 255, 255, 0.08);
  --border-strong: rgba(255, 255, 255, 0.15);

  --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  --shadow-md: 0 12px 30px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  --shadow-sm: 0 4px 15px rgba(0, 0, 0, 0.3);
  --shadow-strong: 0 15px 40px rgba(0, 0, 0, 0.5);

  --overlay: rgba(0, 0, 0, 0.6);
  --focus-ring: rgba(96, 165, 250, 0.5);

  --input-bg: rgba(0, 0, 0, 0.3);
  --segment-bg: rgba(255, 255, 255, 0.1);
  --button-hover: rgba(255, 255, 255, 0.1);
  --button-active: rgba(255, 255, 255, 0.15);
  --icon-bg: rgba(255, 255, 255, 0.1);

  --bubble-bg: rgba(40, 40, 45, 0.8);
  --bubble-border: rgba(255, 255, 255, 0.1);
  --bubble-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* =========================================
   2. TURBO MODE (LEGACY RESTORATION)
   ========================================= */
.turbo-mode {
  --bg: #f5f5f7;
  --text: #1d1d1f;
  --muted: #86868b;
  --border: #e1e1e3;
  --border-strong: #86868b;
  --card: #ffffff;
  --card-soft: rgba(255, 255, 255, 0.9);
  --card-muted: rgba(255, 255, 255, 0.8);
  --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.06);
  --shadow-sm: 0 6px 14px rgba(0, 0, 0, 0.06);
  --shadow-strong: 0 8px 20px rgba(0, 0, 0, 0.08);
  --panel-shadow: -8px 0 24px rgba(0, 0, 0, 0.12);
  --overlay: rgba(0, 0, 0, 0.3);
  --focus-ring: rgba(29, 29, 31, 0.2);
  --input-bg: rgba(255, 255, 255, 0.9);
  --segment-bg: rgba(255, 255, 255, 0.8);
  --button-hover: #f5f5f7;
  --button-active: #ededf0;
  --icon-bg: #f0f0f2;
  --bubble-bg: rgba(255, 255, 255, 0.9);
  --bubble-border: #e1e1e3;
  --bubble-shadow: 0 6px 14px rgba(0, 0, 0, 0.06);

  /* Disable Blur */
  --blur-strength: 0px;
}

.turbo-mode.dark {
  --bg: #000000;
  --text: #f5f5f7;
  --muted: #a1a1a6;
  --border: #2c2c2e;
  --border-strong: #3a3a3c;
  --card: #1c1c1e;
  --card-soft: rgba(28, 28, 30, 0.8);
  --card-muted: rgba(28, 28, 30, 0.7);
  --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.3);
  --shadow-sm: 0 6px 14px rgba(0, 0, 0, 0.12);
  --shadow-strong: 0 8px 20px rgba(0, 0, 0, 0.3);
  --panel-shadow: -8px 0 24px rgba(0, 0, 0, 0.45);
  --overlay: rgba(0, 0, 0, 0.35);
  --focus-ring: rgba(245, 245, 247, 0.2);
  --input-bg: rgba(28, 28, 30, 0.8);
  --segment-bg: rgba(28, 28, 30, 0.8);
  --button-hover: #111114;
  --button-active: #0b0b0d;
  --icon-bg: #2a2a2c;
  --bubble-bg: rgba(28, 28, 30, 0.8);
  --bubble-border: #2c2c2e;
  --bubble-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
}

.turbo-mode *,
.turbo-mode *::before,
.turbo-mode *::after {
  animation: none !important;
  transition: none !important;
}

/* =========================================
   3. BASE & LAYOUT
   ========================================= */
*, *::before, *::after {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  overflow-x: hidden;
}

:focus, :focus-visible {
  outline: none;
}

a {
  color: inherit;
  text-decoration: none;
}

button, input, textarea {
  font: inherit;
  color: inherit;
}

button {
  cursor: pointer;
  background: none;
  border: none;
}

button:disabled, input:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

/* Main Page Container */
.page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  background: var(--bg);
  color: var(--text);
  font-family: "MiSans", -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft Yahei", system-ui, sans-serif;
  line-height: 1.5;
  position: relative;
  transition: background 0.3s ease, color 0.3s ease;
}

/* =========================================
   4. AESTHETIC BACKGROUND (The Magic)
   ========================================= */
.aesthetic-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.6;
  animation: float 20s infinite ease-in-out alternate;
}

.orb-1 {
  width: 60vh;
  height: 60vh;
  background: radial-gradient(circle, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
  top: -10%;
  left: -10%;
  animation-duration: 25s;
}

.orb-2 {
  width: 50vh;
  height: 50vh;
  background: radial-gradient(circle, #a18cd1 0%, #fbc2eb 100%);
  bottom: -10%;
  right: -10%;
  animation-duration: 30s;
  animation-delay: -5s;
}

.orb-3 {
  width: 40vh;
  height: 40vh;
  background: radial-gradient(circle, #84fab0 0%, #8fd3f4 100%);
  top: 40%;
  left: 40%;
  transform: translate(-50%, -50%);
  opacity: 0.4;
  animation-duration: 20s;
  animation-delay: -10s;
}

/* Dark Mode Orbs */
.dark .orb-1 { background: radial-gradient(circle, #4b134f 0%, #c94b4b 100%); opacity: 0.4; }
.dark .orb-2 { background: radial-gradient(circle, #1a2980 0%, #26d0ce 100%); opacity: 0.3; }
.dark .orb-3 { background: radial-gradient(circle, #000000 0%, #434343 100%); opacity: 0.2; }

@keyframes float {
  0% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(30px, 50px) rotate(10deg); }
  66% { transform: translate(-20px, 20px) rotate(-5deg); }
  100% { transform: translate(0, 0) rotate(0deg); }
}

/* HIDE BACKGROUND IN TURBO MODE */
.turbo-mode .aesthetic-bg {
  display: none;
}

/* =========================================
   5. COMPONENTS
   ========================================= */
.layout {
  width: 100%;
  max-width: 400px; /* Slightly narrower for mobile elegance */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
  z-index: 1; /* Above background */
  position: relative;
}

/* Card Styling */
.card {
  width: 100%;
  padding: 32px;
  border-radius: 32px; /* Rounder corners */
  border: 1px solid var(--border);
  background: var(--card);
  box-shadow: var(--shadow-lg);
  text-align: center;

  /* Glass Effect */
  backdrop-filter: blur(var(--blur-strength));
  -webkit-backdrop-filter: blur(var(--blur-strength));

  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
}

/* Turbo Mode Card Reset */
.turbo-mode .card {
  border-radius: 20px;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: var(--shadow-lg); /* Uses the simpler shadow var */
}

.card-header {
  margin-bottom: 32px;
}

.card-title {
  margin: 0;
  font-size: 1.75rem; /* Larger title */
  font-weight: 700;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--text) 0%, var(--muted) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Turbo Mode Title Reset */
.turbo-mode .card-title {
  font-size: 1.5rem;
  background: none;
  -webkit-text-fill-color: initial;
  color: var(--text);
}

.card-actions {
  display: flex;
  flex-direction: column;
  gap: 16px;
}


/* Option Buttons */
.option-button {
  width: 100%;
  border-radius: 24px; /* Pill shape */
  border: 1px solid var(--border);
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 16px;
  text-align: left;
  font-size: 1.05rem;
  font-weight: 600;
  color: var(--text);
  background: var(--card-soft);
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  position: relative;
  overflow: hidden;
}

.option-button:hover {
  background: var(--button-hover);
  transform: translateY(-2px) scale(1.02);
  box-shadow: var(--shadow-md);
  border-color: var(--border-strong);
}

.option-button:active {
  transform: translateY(1px) scale(0.98);
}

/* Turbo Mode Button Reset */
.turbo-mode .option-button {
  border-radius: 12px;
  background: transparent;
  transform: none !important;
  box-shadow: none !important;
}
.turbo-mode .option-button:hover {
  background: var(--button-hover);
}

.option-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--icon-bg);
  color: var(--text);
  flex: 0 0 auto;
  box-shadow: var(--shadow-sm);
  transition: transform 0.3s ease;
}

.option-button:hover .option-icon {
  transform: rotate(10deg) scale(1.1);
}

.turbo-mode .option-icon {
  width: 36px;
  height: 36px;
  background: var(--icon-bg);
  box-shadow: none;
  transform: none !important;
}

/* Icons */
.icon {
  width: 24px;
  height: 24px;
  display: block;
}
.turbo-mode .icon {
  width: 20px;
  height: 20px;
}

/* Support Button */
.support-button {
  width: 100%;
  border-radius: 24px;
  border: 1px solid var(--border);
  padding: 14px 20px;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
  margin-top: 8px;
}

.support-button:hover {
  background: var(--button-hover);
  transform: translateY(-1px);
}

.turbo-mode .support-button {
  border-radius: 12px;
  background: var(--card-soft);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: none !important;
}

/* Header Buttons (Login, Settings) */
.icon-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--card-soft);
  color: var(--text);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: all 0.2s ease;
}

/* Mobile sizing adjustment for header buttons */
@media (max-width: 640px) {
  .icon-button {
    width: 40px;
    height: 40px;
  }
}

.icon-button:hover {
  background: var(--button-hover);
  transform: rotate(90deg);
}

.turbo-mode .icon-button {
  width: 40px;
  height: 40px;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: none !important;
}

.icon-button--small { width: 32px; height: 32px; }
.icon-button--medium { width: 36px; height: 36px; }
.icon-button--square { width: 44px; height: 44px; border-radius: 14px; transform: none !important; }

.settings-toggle {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 10;
}

.login-button {
  position: fixed;
  top: 16px;
  right: 72px;
  z-index: 10;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  height: 44px;
  padding: 0 20px 0 16px;
  border-radius: 22px;
  border: 1px solid var(--border);
  background: var(--card-soft);
  color: var(--text);
  font-size: 0.9rem;
  font-weight: 600;
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition: all 0.2s ease;
}

.login-button:hover {
  background: var(--button-hover);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.turbo-mode .login-button {
  top: 16px;
  right: 72px;
  height: 40px;
  border-radius: 20px;
  padding: 0 16px 0 12px;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: none !important;
}

.login-button .icon {
  width: 18px;
  height: 18px;
}

@media (max-width: 640px) {
  .login-button {
    right: 64px;
    height: 40px;
    padding: 0 14px 0 12px;
    font-size: 0.85rem;
  }
}

/* Footer */
.footer {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border-radius: 20px;
  border: 1px solid var(--border);
  padding: 8px 20px;
  background: var(--card-soft);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  color: var(--muted);
  z-index: 5;
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;
}
.footer:hover {
  transform: translateX(-50%) translateY(-2px);
  box-shadow: var(--shadow-md);
}

.turbo-mode .footer {
  bottom: 24px;
  border-radius: 999px;
  border: 1px dashed var(--border);
  padding: 8px 16px;
  transform: translateX(-50%);
  box-shadow: var(--shadow-sm);
}
.turbo-mode .footer:hover {
  transform: translateX(-50%);
  box-shadow: var(--shadow-sm);
}

.version-label {
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--muted);
  opacity: 0.8;
  letter-spacing: 0.05em;
}

/* =========================================
   6. MODALS & PANELS
   ========================================= */
.overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  backdrop-filter: blur(0px);
  -webkit-backdrop-filter: blur(0px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease, backdrop-filter 0.3s ease;
  z-index: 20;
}

.overlay.is-visible {
  opacity: 1;
  pointer-events: auto;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.turbo-mode .overlay.is-visible {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* Settings Panel */
.settings-panel {
  position: fixed;
  top: 0;
  right: 0;
  height: 100%;
  width: 320px;
  border-left: 1px solid var(--border);
  background: var(--card); /* Glass */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transform: translateX(100%);
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: var(--panel-shadow);
  z-index: 30;
}

.turbo-mode .settings-panel {
  width: 280px;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: var(--card); /* Solid */
  transition: transform 0.2s ease;
}

.settings-panel.is-open {
  transform: translateX(0);
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border);
}

.panel-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
}

.panel-body {
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 4px 0;
}

.setting-label {
  font-size: 0.95rem;
  font-weight: 600;
}

.setting-value {
  font-size: 0.8rem;
  color: var(--muted);
  margin-top: 4px;
}

/* Toggles */
.theme-toggle {
  position: relative;
  width: 52px;
  height: 30px;
  display: inline-flex;
  align-items: center;
  padding: 0 3px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(0,0,0,0.05);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}
.dark .theme-toggle { background: rgba(255,255,255,0.1); }

.turbo-mode .theme-toggle {
  width: 56px;
  height: 32px;
  padding: 0 4px;
  background: var(--card);
}

.theme-thumb {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  transform: translateX(0);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.dark .theme-thumb { background: #333; }
.turbo-mode .theme-thumb {
  background: var(--text);
  box-shadow: none;
  transition: transform 0.2s ease;
}

.theme-thumb.is-on {
  transform: translateX(20px);
}
.turbo-mode .theme-thumb.is-on {
  transform: translateX(24px);
}

/* Turbo Toggle Colors */
.turbo-toggle[aria-pressed="true"] {
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
  border-color: rgba(255, 154, 158, 0.5);
}
.dark .turbo-toggle[aria-pressed="true"] {
  background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
}

.turbo-mode .turbo-toggle[aria-pressed="true"] {
  background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffcc00 100%);
}

/* Modals (Login & Turbo) */
.login-modal, .turbo-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  width: calc(100% - 40px);
  max-width: 400px;
  border-radius: 28px;
  border: 1px solid var(--border);
  background: var(--card);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: var(--shadow-lg);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  z-index: 101;
}

.turbo-mode .login-modal, .turbo-mode .turbo-modal {
  max-width: 380px;
  border-radius: 20px;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transition: opacity 0.3s ease, transform 0.3s ease;
  transform: translate(-50%, -50%) scale(0.9);
}

.login-modal.is-visible, .turbo-modal.is-visible {
  opacity: 1;
  pointer-events: auto;
  transform: translate(-50%, -50%) scale(1);
}

.login-modal-content, .turbo-modal-content {
  padding: 32px;
  text-align: center;
}

.login-modal-icon, .turbo-modal-icon {
  width: 72px;
  height: 72px;
  margin: 0 auto 20px;
  border-radius: 50%;
  background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 30px rgba(132, 250, 176, 0.3);
  color: #fff;
}
.turbo-modal-icon {
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
  box-shadow: 0 10px 30px rgba(255, 154, 158, 0.3);
}

.turbo-mode .login-modal-icon {
  width: 64px;
  height: 64px;
  margin-bottom: 16px;
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.35);
}
.turbo-mode .turbo-modal-icon {
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffcc00 100%);
  box-shadow: 0 8px 24px rgba(247, 147, 30, 0.35);
  font-size: 32px;
}

.login-modal-title, .turbo-modal-title {
  margin: 0 0 16px;
  font-size: 1.4rem;
  font-weight: 700;
}

.login-modal-desc, .turbo-modal-desc {
  margin: 0 0 28px;
  font-size: 1rem;
  line-height: 1.6;
  color: var(--muted);
}

.login-modal-actions, .turbo-modal-actions {
  display: flex;
  gap: 16px;
}

.login-modal-button, .turbo-modal-button {
  flex: 1;
  padding: 16px;
  border-radius: 16px;
  font-size: 1rem;
  font-weight: 600;
  transition: all 0.2s ease;
}

.login-modal-button--cancel, .turbo-modal-button--cancel {
  background: rgba(0,0,0,0.05);
  border: none;
}
.login-modal-button--confirm, .turbo-modal-button--confirm {
  background: var(--text);
  color: var(--bg);
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.turbo-mode .login-modal-button, .turbo-mode .turbo-modal-button {
  border-radius: 12px;
  padding: 14px 20px;
}
.turbo-mode .login-modal-button--cancel {
  background: var(--button-hover);
  border: 1px solid var(--border);
}
.turbo-mode .login-modal-button--confirm {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  color: #fff;
}

/* =========================================
   7. SUPPORT CHAT (Aesthetic)
   ========================================= */
.support-modal {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  background: var(--card);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  opacity: 0;
  pointer-events: none;
  transform: translateY(100%);
  transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.5s ease;
  z-index: 40;
}
.turbo-mode .support-modal {
  background: var(--card); /* Solid */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transition: transform 0.5s ease, opacity 0.5s ease;
}

.support-modal.is-visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

.support-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.support-body {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
}

.support-messages {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.support-bubble {
  max-width: 85%;
  border-radius: 20px;
  padding: 12px 18px;
  font-size: 0.95rem;
  line-height: 1.6;
}

.support-bubble--assistant {
  align-self: flex-start;
  border-bottom-left-radius: 4px;
  background: var(--bubble-bg);
  border: 1px solid var(--bubble-border);
  box-shadow: var(--bubble-shadow);
}

.support-bubble--user {
  align-self: flex-end;
  border-bottom-right-radius: 4px;
  background: var(--text);
  color: var(--bg);
  box-shadow: var(--shadow-md);
}

.turbo-mode .support-bubble {
  border-radius: 12px;
  padding: 8px 12px;
}


/* Support Mode Switcher */
.support-mode {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 20px;
  padding: 4px 8px;
}

.support-mode-title {
  font-size: 0.9rem;
  font-weight: 600;
}

.support-mode-value {
  font-size: 0.8rem;
  color: var(--muted);
}

.mode-switch {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(0,0,0,0.03);
}
.turbo-mode .mode-switch {
  background: var(--segment-bg);
}

.mode-button {
  border-radius: 999px;
  padding: 6px 14px;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--muted);
  background: transparent;
  transition: all 0.2s ease;
}

.mode-button:hover {
  color: var(--text);
}

.mode-button.is-active {
  background: var(--text);
  color: var(--bg);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.turbo-mode .mode-button.is-active {
  box-shadow: none;
}

.support-input-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.support-send {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: var(--text);
  color: var(--bg);
  box-shadow: var(--shadow-md);
  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.support-send:hover {
  transform: scale(1.05) rotate(-10deg);
  box-shadow: var(--shadow-lg);
}

.support-send:active {
  transform: scale(0.95);
}

.support-send .icon {
  width: 20px;
  height: 20px;
  transform: translateX(2px);
}

.turbo-mode .support-send {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: none;
  transform: none !important;
}
.turbo-mode .support-send:hover {
  background: var(--button-hover);
}
.turbo-mode .support-send .icon {
  transform: none;
}

.support-footer {
  padding: 16px 24px 32px; /* Extra bottom padding for mobile */
  border-top: 1px solid var(--border);
  background: rgba(255,255,255,0.05);
}

.support-input {
  flex: 1;
  height: 48px;
  border-radius: 24px;
  background: var(--input-bg);
  border: 1px solid var(--border);
  padding: 0 20px;
  font-size: 0.95rem;
  color: var(--text);
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.02);
  transition: all 0.2s ease;
}
.turbo-mode .support-input {
  border-radius: 12px;
  box-shadow: none;
}

.support-back {
  width: 100%;
  border-radius: 24px;
  border: 1px solid var(--border);
  padding: 14px 20px;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text);
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
  margin-top: 16px;
}

.support-back:hover {
  background: var(--button-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.support-back:active {
  transform: translateY(0);
}

.turbo-mode .support-back {
  border-radius: 12px;
  background: var(--card-soft);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: none !important;
  box-shadow: none;
  border: 1px solid var(--border);
}
.turbo-mode .support-back:hover {
  background: var(--button-hover);
}

/* Tool Badges */
.tool-used-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  border-radius: 20px;
  background: rgba(59, 130, 246, 0.1);
  color: #3b82f6;
  font-size: 0.85rem;
  font-weight: 600;
}

/* =========================================
   8. MISC & UTILITIES
   ========================================= */
.turbo-modal-overlay, .login-modal-overlay, .vip-modal-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 100;
}
.turbo-mode .turbo-modal-overlay, .turbo-mode .login-modal-overlay {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}
.is-visible {
  opacity: 1;
  pointer-events: auto;
}

/* Animations */
@keyframes turbo-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
}

/* =========================================
   9. NEW ANIMATIONS (AI & ENTRANCE)
   ========================================= */

.announcement-banner {
  width: 100%;
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 16px;
  background: rgba(255, 165, 0, 0.1); /* Orange tint */
  border: 1px solid rgba(255, 165, 0, 0.2);
  backdrop-filter: blur(var(--blur-strength));
  -webkit-backdrop-filter: blur(var(--blur-strength));
  color: var(--text);
  font-size: 0.85rem;
  line-height: 1.5;
  box-shadow: var(--shadow-sm);
  margin-bottom: 0; /* Let layout gap handle spacing */
  animation: fade-in-down 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) backwards;
  animation-delay: 0.2s;
}

.announcement-icon {
  flex-shrink: 0;
  color: #ff9f43; /* Warm orange */
  padding-top: 2px;
}

.announcement-text {
  flex: 1;
}

.announcement-text strong {
  color: #ff9f43;
  font-weight: 700;
}

.countdown-highlight {
  color: #ef4444;
  font-weight: 800;
  font-family: monospace;
  font-size: 1.05em;
  background: rgba(239, 68, 68, 0.1);
  padding: 2px 8px;
  border-radius: 6px;
  letter-spacing: 0.02em;
}

.domain-warning {
  background: rgba(239, 68, 68, 0.12);
  border-color: rgba(239, 68, 68, 0.25);
}

.domain-warning .announcement-icon {
  color: #ef4444;
}

.domain-warning .announcement-text strong {
  color: #ef4444;
}

.domain-warning.is-hidden {
  display: none;
}

.dark .announcement-banner {
  background: rgba(255, 165, 0, 0.05);
  border-color: rgba(255, 165, 0, 0.15);
}

.dark .domain-warning {
  background: rgba(239, 68, 68, 0.08);
  border-color: rgba(239, 68, 68, 0.2);
}

/* Shutdown Notice Banner - Blue/Cyan theme */
.shutdown-notice {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.25);
  animation-delay: 0.3s;
}

.shutdown-notice .announcement-icon {
  color: #3b82f6;
}

.dark .shutdown-notice {
  background: rgba(59, 130, 246, 0.08);
  border-color: rgba(59, 130, 246, 0.2);
}

.turbo-mode .shutdown-notice {
  background: #e8f4fd;
  border: 1px solid #bfdbfe;
}

.turbo-mode.dark .shutdown-notice {
  background: #1a2332;
  border-color: #1e3a5f;
}

.dark .countdown-highlight {
  color: #ff6b6b;
  background: rgba(239, 68, 68, 0.15);
}

.turbo-mode .announcement-banner {
  background: #fff8e1;
  border: 1px solid #ffecb3;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border-radius: 12px;
  animation: none !important;
}

.turbo-mode.dark .announcement-banner {
  background: #2a2010;
  border-color: #3e3010;
}

.turbo-mode .countdown-highlight {
  background: transparent;
  padding: 0;
  font-weight: 700;
}

@keyframes fade-in-down {
  0% { opacity: 0; transform: translateY(-20px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Entrance Animations (Not in Turbo Mode) */
body:not(.turbo-mode) .card {
  animation: card-entrance 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) backwards;
}

body:not(.turbo-mode) .option-button {
  animation: item-entrance 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) backwards;
}

body:not(.turbo-mode) .option-button:nth-child(1) { animation-delay: 0.1s; }
body:not(.turbo-mode) .option-button:nth-child(2) { animation-delay: 0.2s; }
body:not(.turbo-mode) .option-button:nth-child(3) { animation-delay: 0.3s; }

body:not(.turbo-mode) .support-button {
  animation: item-entrance 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) backwards;
  animation-delay: 0.4s;
}

body:not(.turbo-mode) .vip-badge,
body:not(.turbo-mode) .login-button,
body:not(.turbo-mode) .settings-toggle {
  animation: fade-in 0.8s ease backwards;
  animation-delay: 0.5s;
}

@keyframes card-entrance {
  0% { opacity: 0; transform: translateY(30px) scale(0.95); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes item-entrance {
  0% { opacity: 0; transform: translateX(-10px); }
  100% { opacity: 1; transform: translateX(0); }
}

@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

/* AI Transition Overlay */
.ai-transition-overlay {
  position: fixed;
  inset: 0;
  background: #000;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.ai-transition-overlay.is-active {
  opacity: 1;
  pointer-events: auto;
}

/* In Turbo Mode, keeping it simple or invisible if desired,
   but since JS triggers it, we'll handle the visual style here.
   However, user requested NO animations in Turbo Mode.
   We will handle the JS logic to skip the delay, but if the class is added,
   we ensure it doesn't look "heavy" or just hide it entirely. */
.turbo-mode .ai-transition-overlay {
  display: none !important;
}

.ai-transition-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  transform: scale(0.8);
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.ai-transition-overlay.is-active .ai-transition-content {
  transform: scale(1);
}

.ai-loader {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 3px solid rgba(255, 255, 255, 0.1);
  border-top-color: #fff;
  border-right-color: #fff;
  animation: spin 0.8s linear infinite;
  box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
}

.ai-text {
  color: #fff;
  font-family: monospace;
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: 0.2em;
  animation: pulse-text 1.5s infinite ease-in-out;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes pulse-text {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
}

/* =========================================
   10. AI MODEL SWITCHING ANIMATION
   ========================================= */

/* The container animation during switch */
.support-messages.is-switching-out {
  animation: ai-switch-out 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.support-messages.is-switching-in {
  animation: ai-switch-in 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

@keyframes ai-switch-out {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
    filter: blur(8px);
  }
}

@keyframes ai-switch-in {
  0% {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
    filter: blur(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* Turbo Mode: Disable these animations explicitly */
.turbo-mode .support-messages.is-switching-out,
.turbo-mode .support-messages.is-switching-in {
  animation: none !important;
  opacity: 1 !important;
  transform: none !important;
  filter: none !important;
}

/* =========================================
   11. GROUP NOTICE MODAL
   ========================================= */
.group-notice-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  backdrop-filter: blur(var(--blur-strength));
  -webkit-backdrop-filter: blur(var(--blur-strength));
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
  z-index: 9998;
}

.group-notice-overlay.is-visible {
  opacity: 1;
  visibility: visible;
}

.group-notice-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  width: 90%;
  max-width: 360px;
  background: var(--card);
  backdrop-filter: blur(var(--blur-strength));
  -webkit-backdrop-filter: blur(var(--blur-strength));
  border: 1px solid var(--border);
  border-radius: 20px;
  box-shadow: var(--shadow-lg);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
  z-index: 9999;
}

.group-notice-modal.is-visible {
  opacity: 1;
  visibility: visible;
  transform: translate(-50%, -50%) scale(1);
}

.group-notice-content {
  padding: 24px;
  position: relative;
}

.group-notice-close {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--segment-bg);
  color: var(--muted);
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease, color 0.2s ease;
}

.group-notice-close:hover {
  background: var(--button-hover);
  color: var(--text);
}

.group-notice-header {
  text-align: center;
  margin-bottom: 20px;
}

.group-notice-icon {
  width: 56px;
  height: 56px;
  margin: 0 auto 12px;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
}

.group-notice-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
}

.group-notice-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.group-notice-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--segment-bg);
  border-radius: 12px;
}

.group-notice-label {
  color: var(--muted);
  font-size: 0.9rem;
}

.group-notice-value {
  color: var(--text);
  font-weight: 600;
  font-size: 1rem;
}

.group-notice-footer {
  text-align: center;
}

.group-notice-button {
  width: 100%;
  padding: 12px 24px;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.group-notice-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
}

.group-notice-button:active {
  transform: translateY(0);
}

/* Turbo Mode: Disable animations */
.turbo-mode .group-notice-overlay,
.turbo-mode .group-notice-modal {
  transition: none;
}

.turbo-mode .group-notice-overlay {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.turbo-mode .group-notice-modal {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

